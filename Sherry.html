<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Sherry</title>
	<meta name="keywords" content="ginlovesherry">
	<meta name="description" content="sherrylovegin">
	<style>
		#box{
			width: 420px;
			height: 420px;
			border: 1px solid #000;
			background: #a7ccd5;
			margin: 88px auto;
		}
	</style>
	<script type='text/javascript' src='https://platform-api.sharethis.com/js/sharethis.js#property=5bc5b494b2b6bd00118b8c2a&product=inline-share-buttons' async='async'></script>
</head>
<body>
	<div id="box">
		<canvas id="cvs" width="420" height="420"></canvas>
	</div>
	<div class="sharethis-inline-share-buttons"></div>
	<script>
		var cvs=document.getElementById('cvs');
		var ctx=cvs.getContext("2d");
		function clock(){
			//1. 获取当前时间及指针角度计算初值
			var time=new Date();
			var h=time.getHours();
			var m=time.getMinutes();
			var s=time.getSeconds();
			h>11?h-12:h;
			h=h+(m/60);
			m=m+(s/60);

			//2. 切割圆形
			ctx.beginPath();
			ctx.arc(210,210,200,0,360,false);
			ctx.clip();
			ctx.closePath();

			//3. 画背景图片
			var img=new Image();
			img.src="sherry.jpg";
			img.onload=function(){
				ctx.drawImage(img,0,0,420,420);

				//画表的边界线
				ctx.beginPath();
				ctx.arc(210,210,200,0,360,false);
				ctx.strokeStyle="#60d9f8";
				ctx.lineWidth=10;
				ctx.stroke();

				//画分刻度 360/60=6
				for (var i = 0; i < 60; i++) {
					ctx.save();
					ctx.beginPath();
					ctx.translate(210,210);
					ctx.rotate(i*6*Math.PI/180);
					ctx.moveTo(0,-185);
					ctx.lineTo(0,-195);
					ctx.strokeStyle="#fef319";
					ctx.lineWidth=5;
					ctx.stroke();
					ctx.closePath();
					ctx.restore();
				};

				//画时刻度 360/12=30
				for (var i = 0; i < 12; i++) {
					ctx.save();
					ctx.beginPath();
					ctx.translate(210,210);
					ctx.rotate(i*30*Math.PI/180);
					ctx.moveTo(0,-175);
					ctx.lineTo(0,-195);
					ctx.strokeStyle="#60d9f8";
					ctx.lineWidth=8;
					ctx.stroke();
					ctx.closePath();
					ctx.restore();
				};

				//画时针
				ctx.save();
				ctx.beginPath();
				ctx.translate(210,210);
				ctx.rotate(h*30*Math.PI/180);
				ctx.moveTo(0,12);
				ctx.lineTo(0,-130);
				ctx.strokeStyle="#60d9f8";
				ctx.lineWidth=8;
				ctx.stroke();
				ctx.closePath();
				ctx.restore();

				//画分针
				ctx.save();
				ctx.beginPath();
				ctx.translate(210,210);
				ctx.rotate(m*6*Math.PI/180);
				ctx.moveTo(0,12);
				ctx.lineTo(0,-150);
				ctx.strokeStyle="#fef319";
				ctx.lineWidth=5;
				ctx.stroke();
				ctx.closePath();
				ctx.restore();

				//画秒针
				ctx.save();
				ctx.beginPath();
				ctx.translate(210,210);
				ctx.rotate(s*6*Math.PI/180);
				ctx.moveTo(0,12);
				ctx.lineTo(0,-172);
				ctx.strokeStyle="#fb1f11";
				ctx.lineWidth=3;
				ctx.stroke();
				ctx.closePath();

				//秒针上的圆
				ctx.beginPath();
				ctx.arc(0,-155,6,0,360,false);
				ctx.strokeStyle="#fb1f11";
				ctx.fillStyle="#fef319";
				ctx.lineWidth=3;
				ctx.fill();
				ctx.stroke();
				ctx.closePath();
				
				//中心圆
				ctx.beginPath();
				ctx.arc(0,0,7,0,360,false);
				ctx.strokeStyle='#FB1F11';
				ctx.fillStyle='#FEF319';
				ctx.lineWidth=3;
				ctx.fill();
				ctx.stroke();
				ctx.closePath();
				ctx.restore();

				//显示当前时间
				var h2=time.getHours();
				var m2=time.getMinutes();
				var str1=h2<10?('0'+h2):h2;
				var str2=m2<10?('0'+m2):m2;
				ctx.font='25px 微软雅黑';
				ctx.fillStyle='#FB1F11';
				ctx.fillText(str1+':'+str2,180,320);
			}
		}
		clock();
		//setInterval(clock,1000);
	</script>
</body>
</html>
